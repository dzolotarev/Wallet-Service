# Wallet-Service

Cервис управляет кредитными/дебетовыми транзакциями от имени игроков (пользователей).

## Описание
Денежный счет содержит текущий баланс игрока. Баланс можно изменить, зарегистрировав транзакции на счете,
либо дебетовые транзакции (удаление средств), либо кредитные транзакции (добавление средств).

## Версия 0.0.2
### Требования
1. [x] Репозитории теперь пишут ВСЕ сущности в БД PostgreSQL
2. [x] Идентификаторы при сохранении в БД выдаваться через sequence.
3. [x] DDL-скрипты на создание таблиц и скрипты на предзаполнение таблиц выполняются инструментом миграции Liquibase
4. [x] Скрипты миграции Luiqbase написаны в нотации XML
5. [x] Скриптов миграции два. Один на создание всех таблиц, другой - не предзаполнение данными
6. [x] Служебные таблицы в отдельной схеме
7. [x] Таблицы сущностей храняться также в отдельной схеме
8. [x] В репо есть docker-compose.yml, в котором прописаны инструкции для развертывания postgre в докере
9. [x] Приложение поддерживать конфиг-файлы. Всё, что относится к подключению БД, а также к миграциям, сконфигурировано через конфиг-файлы

### Запуск
- Запустить _docker-compose up_ из _resources/docker-compose.yml_
- Запустить перед первым запуском миграцию через **_DbMigration.java_**   
- Запуск приложения осуществляется из класса _**App.class**_
- Следовать инструкциям на экране =)
- При миграции создается два тестовых пользователя (_login:111/pass:1111_ и _login:222/pass:2222_) - можно использовать для теста =)
- Настройки БД в _resources/db.properties_

### ToDo
1. [ ] Все еще нет тестов =(
2. [ ] JavaDoc оформлен частично
3. [ ] Сломал реализацию хранения в коллекциях: надо починить и использовать коллекции как локальный кэш



## Версия 0.0.1
### Требования
1. [x] Данные хранятся в памяти приложения
2. [x] Приложение должно быть консольным (никаих спрингов, взаимодействий с БД и тд, только java-core и collections)
3. [x] Регистрация игрока
4. [x] Авторизация игрока
5. [x] Текущий баланс игрока
6. [x] Дебет/снятие средств для каждого игрока. Дебетовая транзакция будет успешной только в том случае, если на счету достаточно средств (баланс - сумма дебета >= 0).
7. [x] Вызывающая сторона предоставит идентификатор транзакции, который должен быть уникальным для всех транзакций. Если идентификатор транзакции не уникален, операция должна завершиться ошибкой.
8. [x] Кредит на игрока. Вызывающая сторона предоставит идентификатор транзакции, который должен быть уникальным для всех транзакций. Если идентификатор транзакции не уникален, операция должна завершиться ошибкой.
9. [x] Просмотр истории пополнения/снятия средств игроком
10. [x] Аудит действий игрока (авторизация, завершение работы, пополнения, снятия)

### Запуск
- Запуск приложения осуществляется из класса _**App.class**_
- Далее, следовать инструкциям на экране =)

### ToDo
1. [ ] Unit-тесты
2. [ ] JavaDoc